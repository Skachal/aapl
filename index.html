<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./c.css">
    <title>Wedding Invitation</title>
    
</head>
<body>
    <div class="container">
        <div class="home-logo">
            <p>Aлексей & Лаура</p>
            <h2>Приглашаем вас на свадьбу <br> 17.08.2024г.</h2>
        </div>
        <div class="countdown-container" data-mdb-countdown-init data-mdb-countdown="17 august 2024 18:00:00" data-mdb-countdown-separator=":">
            <div class="countdown-item">
                <div class="countdown-unit countdown-days"></div>
                <div class="countdown-label">Дни</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-unit countdown-hours"></div>
                <div class="countdown-label">Часы</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-unit countdown-minutes"></div>
                <div class="countdown-label">Минуты</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-unit countdown-seconds"></div>
                <div class="countdown-label">Секунды</div>
            </div>
        </div>
        <div class="dorogoi-gost">
            <h2>Дорогой гость!</h2>
            <p>Мы рады сообщить Вам, <br> что 17.08.2024 <br> состоится самое главное торжество в нашей жизни - <br> День нашей свадьбы!<br> Приглашаем Вас разделить с нами <br> радость этого незабываемого дня.</p>
            <h2>Ждем Вас!</h2>
            <h2>18:00</h2>
        </div>
        <section id="dresscode" class="dresscode">
            <h2>Дресс-код</h2>
            <p>Уважаемые гости, мы будем вам очень признательны, если в своём наряде Вы выберете эти оттенки.</p>
            <div>
                <img src="https://img3.akspic.ru/attachments/originals/3/7/6/9/0/109673-sinij_cvet-lepestok-atlasnyj-atlas-krasnyj_cvet-2560x1600.jpg" width="70" height="70" alt="Кроваво Красный">
                <img src="https://furnilux.ru/wp-content/uploads/4772406_image.jpg" width="70" height="70" alt="Изумрудный">
                <img src="https://i.artfile.me/wallpaper/24-11-2013/2560x1706/raznoe-tekstury-skladki-svetlaya-zheltay-768925.jpg" width="70" height="70" alt="Золотой">
                <img src="https://catherineasquithgallery.com/uploads/posts/2021-02/1614289689_7-p-chernii-shelk-fon-7.jpg" width="70" height="70" alt="Черный">
                <img src="https://wallpapercrafter.com/desktop1/600406-white-fabric-Texture-Atlas-silk-satin-rippled.jpg" width="70" height="70" alt="Белый">
            </div>
        </section>
        <form id="rsvpfrm" action="https://0e2bccdc13d6f80b.mokky.dev/data" method="post" target="_top">
            <h2>Подтвердите присутствие</h2>
            <label for="name">Ваше имя и фамилия</label>
            <input type="text" id="rsvpform-name" class="form-control" name="RsvpForm[name]" title="Пожалуйста, укажите ваше имя" placeholder="Ваше имя и фамилия">
            <div>
                <label><input type="radio" name="RsvpForm[willbe]" value="yes" checked> Присутствие подтверждаю</label>
                <label><input type="radio" name="RsvpForm[willbe]" value="no"> К сожалению, не смогу быть</label>
            </div>
            <p>
                <button name="submit" type="submit" class="btn btn-primary" id="rsvp-submit">Отправить</button>
            </p>
        </form>
    </div>

    <div id="successModal" class="modal" >
        <div class="modal-content" style="background: #F8F8F8;">
            <img src="./img/котЛове.jpg" alt="zloy cat">
            <p class="cute-message">Спасибо за подтверждение! Мы с нетерпением ждем Вас на нашем особом дне!</p>
        </div>
    </div>

    <div id="errorModal" class="modal">
        <div class="modal-content">
            <img src="./img/злойКот.jpg" alt="zloy cat">
            <p class="error-message">Пожалуйста, заполните все поля формы!</p>
        </div>
    </div>

    <div id="declineModal" class="modal">
        <div class="modal-content">
            <img src="./img/котЛежит.jpg" alt="zloy cat">
            <p class="decline-message">Жаль, что Вы не сможете быть с нами. Надеемся увидеть Вас в другой раз!</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('rsvpfrm');
            const successModal = document.getElementById('successModal');
            const errorModal = document.getElementById('errorModal');
            const declineModal = document.getElementById('declineModal');
    
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                const name = document.getElementById('rsvpform-name').value.trim();
                const willBe = document.querySelector('input[name="RsvpForm[willbe]"]:checked').value;
    
                if (name === "") {
                    errorModal.style.display = "block";
                } else {
                    const formData = {
                        id: 1, // Вы можете динамически устанавливать ID, если это необходимо
                        data: new Date().toISOString(),
                        name: name,
                        willbe: [ "", willBe ]
                    };
    
                    fetch(form.action, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (willBe === "yes") {
                            successModal.style.display = "block";
                        } else {
                            declineModal.style.display = "block";
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        errorModal.style.display = "block";
                    });
                }
            });
    
            window.addEventListener('click', function(event) {
                if (event.target === successModal) {
                    successModal.style.display = "none";
                }
                if (event.target === errorModal) {
                    errorModal.style.display = "none";
                }
                if (event.target === declineModal) {
                    declineModal.style.display = "none";
                }
            });
    
            function updateCountdown() {
                const countdownElement = document.querySelector('[data-mdb-countdown-init]');
                const countdownDate = new Date(countdownElement.dataset.mdbCountdown).getTime();
                const now = new Date().getTime();
                const distance = countdownDate - now;
    
                if (distance > 0) {
                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
    
                    document.querySelector('.countdown-days').textContent = days;
                    document.querySelector('.countdown-hours').textContent = hours;
                    document.querySelector('.countdown-minutes').textContent = minutes;
                    document.querySelector('.countdown-seconds').textContent = seconds;
                } else {
                    clearInterval(countdownInterval);
                    countdownElement.innerHTML = "Таймер истек!";
                }
            }
    
            const countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown();
        });
    </script>
    
</body>
</html>
